
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>@草丁</title>
    
    <meta name="author" content="Ley">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Ley</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">归档</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/category.html">分类</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">标签</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h2>@草丁  <small>不爱吃糖</small></h1>
</div>

<div class="row-fluid">
  <div class="span12">
    <ul class='posts'>
  
    <div><h3><span>06 Sep 2013 &raquo; </span><a href='/2013/09/06/android-emulator-for-opengl'>Android Emulator For Opengl</a></h3></div>
    <div><p>写在前面：这篇文章是在用cocos2d-x JSB开发游戏时从官方找到的文档，网上没有找到比这个好用的完整解决方法了。以后有时间会翻译成中文。</p>

<h3 id='problem_and_solution'>Problem and solution</h3>

<p>For a few years the only option was to run the Android emulator by emulating the ARM instruction set on a x86 host machine. While this is still possible, it has two problems</p>

<ul>
<li>it is very, very slow</li>

<li>GPU support and OpenGL ES 2.0 is not well supported</li>
</ul>

<p>So cocos2d-x does not run correctly.</p>

<p>The fix is to use virtualization with the x86 version of Android and enable GPU acceleration. With these options enabled, you can successfully use the emulator to develop with cocos2d-x!</p>

<h3 id='howto'>How-to</h3>

<ol>
<li>Download and create an Android emulator using the x86 system image</li>

<li>Enable virtualization (with CPU&#8217;s that support VT-X) on Windows/Linux/OSX</li>

<li>Build cocos2d-x libraries for the x86 architecture too</li>

<li>Run the emulator with the correct library path and options</li>

<li>Success!</li>
</ol>

<h4 id='download_and_create_an_android_emulator_using_the_x86_system_image'>Download and create an Android emulator using the x86 system image</h4>

<ul>
<li>Run the android emulator manager :</li>
</ul>

<p><code>
&lt;android-sdk&gt;/tools/android
</code></p>

<p>Ensure that &#8220;Intel x86 Atom System Image&#8221; is selected, downloaded and installed for the Android version you are using.</p>

<ul>
<li>
<p>Open the menu item</p>

<p>&#8220;Tools&#8221;-&gt;&#8221;Manage AVDs&#8221;</p>
</li>

<li>
<p>Create a new Android Virtual Device</p>
</li>

<li>
<p>Make sure to select the &#8220;x86&#8221; option in the CPU/ABI dropdown</p>
</li>

<li>
<p>Make sure to select the &#8220;Use Host GPU&#8221; checkbox</p>
</li>
</ul>

<h4 id='enable_virtualization_with_cpus_that_support_vtx_on_windowslinuxosx'>Enable virtualization (with CPU&#8217;s that support VT-X) on Windows/Linux/OSX</h4>

<p>Please follow intel&#8217;s instructions here on downloading/enabling virtualization for the Android emulator http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/</p>

<h4 id='build_cocos2dx_libraries_for_the_x86_architecture_too'>Build cocos2d-x libraries for the x86 architecture too</h4>

<p>In your app&#8217;s Application.mk, add x86 to the supported ABI&#8217;s by adding/editing this line</p>

<p><code>
APP_ABI := armeabi x86
</code></p>

<h4 id='run_the_emulator_with_the_correct_library_path_and_options'>Run the emulator with the correct library path and options</h4>

<p>Make sure to</p>

<ul>
<li>Set the library path to the directory containing the Open GL library for the emulator (LD_LIBRARY_PATH=&#8230;)</li>

<li>Run the x86 version of the emulator (run <code>&lt;android-sdk&gt;/tools/emulator-x86</code>)</li>

<li>Enable GPU use (Use the option &#8220;-gpu on&#8221;)</li>

<li>Also, you need to specify the name of the Android Virtual Device to use (Use the option <code>-avd &lt;android virtual device name&gt;</code>)</li>
</ul>

<p>On OS X the command line looks like this</p>

<p><code>
LD_LIBRARY_PATH=~/bin/android-sdk/tools/lib ~/bin/android-sdk/tools/emulator-x86 -verbose -avd android17x86 -gpu on
</code></p></div>
    <div />
  
    <div><h3><span>05 Sep 2012 &raquo; </span><a href='/%E7%A2%8E%E7%A2%8E%E5%BF%B5/2012/09/05/at-the-beginning'>写在最前</a></h3></div>
    <div><p>又开始写笔记了。</p>

<p>源自于想记录下光怪陆离又气势磅礴的梦境，无奈有科幻的梦靥却无作家的文笔，只有程序媛刨根揪底的思维习气，就再一次地鼓捣起自己的博客，记录些什么。</p>

<p>幸好，将这个世界当做一场梦来碎碎念，也不失为一种乐趣。</p></div>
    <div />
  
</ul><hr />
<h4 id='about_me'>About Me</h4>

<p>我叫草丁，开发工程师，有梦，在想。</p>
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2013 Ley
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

